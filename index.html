<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8">
    <title>å››é  Tab å¼•æ“</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>
  <body class="p-5">

    <h2 class="mb-4">ğŸŒŸ å¼•æ“é ç±¤ç¯„ä¾‹</h2>

    <!-- Tabs é¸å–® -->
    <ul class="nav nav-tabs" id="engineTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab"
          data-bs-target="#tab1" type="button" role="tab">æ–‡ç« ä»‹æ¥</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tab2-tab" data-bs-toggle="tab"
          data-bs-target="#tab2" type="button" role="tab">ç”¨æˆ¶ä»‹æ¥</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tab3-tab" data-bs-toggle="tab"
          data-bs-target="#tab3" type="button" role="tab">åœ–ç‰‡ä»‹æ¥</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tab4-tab" data-bs-toggle="tab"
          data-bs-target="#tab4" type="button" role="tab">å°åŒ—æ™¯é»</button>
      </li>
    </ul>

    <!-- Tabs å…§å®¹ -->
    <div class="tab-content mt-3" id="engineTabContent">
      <div class="tab-pane fade show active" id="tab1" role="tabpanel">
        <p>
          <h1>é€™è£¡æ˜¯æ–‡ç« æŠ“å–ä»‹æ¥</h1>
          <div id="postList"></div>
        </p>
      </div>
      <div class="tab-pane fade" id="tab2" role="tabpanel">
        <p>
          <h1>ğŸ‘¤ ä½¿ç”¨è€…å¡ç‰‡ç·´ç¿’:é»äº†æŠŠç”¨æˆ¶è³‡æ–™æ¸²æŸ“å‡ºä¾†</h1>
          <button onclick="loadUsers()">è¼‰å…¥ä½¿ç”¨è€…è³‡æ–™</button>
          <div id="userContainer"></div>
        </p>
      </div>
      <div class="tab-pane fade" id="tab3" role="tabpanel">
        <p>
          <h2 class="mb-4">ğŸ–¼ åœ–ç‰‡æ·¡å…¥ä»‹æ¥:åœ–ç‰‡loadingå†æ¸²æŸ“</h2>
          <button class="btn btn-primary mb-3"
            onclick="loadPhotos()">è¼‰å…¥åœ–ç‰‡</button>

          <div id="photoContainer" class="row g-3"></div>
        </div>
        <div class="tab-pane fade" id="tab4" role="tabpanel">
          <p>
            <h2 class="mb-4">ğŸ å°åŒ—æ™¯é»å¡ç‰‡api ä»‹æ¥</h2>
            <div id="spotContainer" class="row g-3"></div>
          </p>
        </div>
      </div>

      <!-- Bootstrap JS -->
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

      <script>
    //æ–‡ç« æŠ“å–ä»‹æ¥: ç™¼å‡º GET è«‹æ±‚å»æŠ“æ–‡ç« 
    async function fetchPosts() {
      const response = await fetch('https://jsonplaceholder.typicode.com/posts');
      const posts = await response.json();

      const postList = document.getElementById('postList');
      posts.slice(0, 5).forEach(post => {
        const div = document.createElement('div');
        div.className = 'post';
        div.innerHTML = `
          <h2>${post.title}</h2>
          <p>${post.body}</p>
        `;
        postList.appendChild(div);
      });
    }

    fetchPosts();

    // ä½¿ç”¨è€…å¡ç‰‡ç·´ç¿’
     async function loadUsers() {
      const res = await fetch('https://jsonplaceholder.typicode.com/users');
      const users = await res.json();

      const container = document.getElementById('userContainer');
      container.innerHTML = ''; // æ¸…ç©ºèˆŠè³‡æ–™

      users.forEach(user => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3>${user.name} (@${user.username})</h3>
          <p>ğŸ“§ ${user.email}</p>
          <p>ğŸ“ ${user.phone}</p>
          <p>ğŸ¢ ${user.company.name}</p>
        `;
        container.appendChild(card);
      });
    }
    // åœ–ç‰‡è³‡æ–™
   async function loadPhotos() {
      const container = document.getElementById('photoContainer');

      // é¡¯ç¤º loading spinner
      container.innerHTML = `
        <div class="d-flex justify-content-center align-items-center py-5 w-100">
          <div class="spinner-border text-primary me-2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <strong>åœ–ç‰‡è¼‰å…¥ä¸­ï¼Œè«‹ç¨å€™...</strong>
        </div>
      `;

      try {
        const res = await fetch('https://jsonplaceholder.typicode.com/photos?_limit=10');
        const photos = await res.json();

        // é å…ˆè¼‰å…¥æ‰€æœ‰åœ–ç‰‡
        const imagePromises = photos.map(photo => {
          return new Promise(resolve => {
            const img = new Image();
            img.src = `https://picsum.photos/300/200?random=${photo.id}`;
            img.onload = () => resolve({ ...photo, imgSrc: img.src });
            img.onerror = () => resolve({ ...photo, imgSrc: '' }); // ä¿è­‰ resolveï¼Œé¿å…å¡ä½
          });
        });

        const loadedPhotos = await Promise.all(imagePromises);

        // çµ„å‡ºæ‰€æœ‰ DOM å…ƒç´ 
        const content = document.createDocumentFragment();

        loadedPhotos.forEach(photo => {
          const col = document.createElement('div');
          col.className = 'col-md-3 fade-in';

          col.innerHTML = `
            <div class="card">
              <img src="${photo.imgSrc}" class="card-img-top" alt="åœ–ç‰‡ç¸®åœ–">
              <div class="card-body">
                <p class="card-text">${photo.title}</p>
              </div>
            </div>
          `;

          content.appendChild(col);
        });

        // æ›æ‰ spinnerï¼Œæ’å…¥å¡ç‰‡
        container.innerHTML = '';
        container.appendChild(content);

        // åŠ ä¸Šæ·¡å…¥æ•ˆæœ
        requestAnimationFrame(() => {
          document.querySelectorAll('.fade-in').forEach(el => {
            el.classList.add('show');
          });
        });

      } catch (error) {
        container.innerHTML = `
          <div class="alert alert-danger text-center" role="alert">
            ğŸ˜¢ åœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚
          </div>
        `;
        console.error(error);
      }
    }

    // å°åŒ—æ™¯é»
    async function loadSpots() {
      const container = document.getElementById('spotContainer');
      container.innerHTML = `
        <div class="d-flex justify-content-center align-items-center py-5 w-100">
          <div class="spinner-border text-primary me-2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <strong>æ™¯é»è¼‰å…¥ä¸­...</strong>
        </div>
      `;

      try {
        const res = await fetch('https://tdx.transportdata.tw/api/basic/v2/Tourism/ScenicSpot/Taipei?$format=JSON');
        const spots = await res.json();

        const filtered = spots.filter(s => s.Picture?.PictureUrl1).slice(0, 10);
        const content = document.createDocumentFragment();

        for (const spot of filtered) {
          const col = document.createElement('div');
          col.className = 'col-md-4 fade-in';

          col.innerHTML = `
            <div class="card h-100">
              <img src="${spot.Picture.PictureUrl1}" class="card-img-top" alt="${spot.ScenicSpotName}">
              <div class="card-body">
                <h5 class="card-title">${spot.ScenicSpotName}</h5>
                <p class="card-text text-truncate">${spot.Description || 'ç„¡ç°¡ä»‹'}</p>
                <p class="text-muted small">${spot.Address || ''}</p>
              </div>
            </div>
          `;

          content.appendChild(col);
        }

        container.innerHTML = '';
        container.appendChild(content);

        requestAnimationFrame(() => {
          document.querySelectorAll('.fade-in').forEach(el => el.classList.add('show'));
        });

      } catch (err) {
        container.innerHTML = `
          <div class="alert alert-danger text-center" role="alert">
            ğŸ˜¢ æ™¯é»è¼‰å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚
          </div>
        `;
        console.error(err);
      }
    }

    // âœ… é é¢ä¸€è¼‰å…¥å°±åŸ·è¡Œ
    window.addEventListener('DOMContentLoaded', loadSpots);
  </script>
    </body>
  </html>
